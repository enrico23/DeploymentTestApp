trigger:
  batch: true
  branches:
    include:
    - main

pool:
  name: DemoPool
  vmImage: 'windows-2022'

variables:
  runEndToEnd: ${{ne(variables['Build.Reason'], 'PullRequest')}}

# ---------------------------------

stages:
- stage: BuildStage
  displayName:  🏗 Build Stage
  dependsOn: []

  jobs:
  # this will create an error
  - job: HelloWorld
    displayName: Hello World
    steps:
      - task: PowerShell@2
        name: preprare_fileList
        displayName: 'Prepare data for ownership report'
        inputs:
          pwsh: true
          targetType: "inline"
          script: |
            echo "Getting file-list from git."
            git ls-tree -r HEAD --name-only > ${{ parameters.ownershipFileListPath }}
            $fileCount = (Get-Content ${{ parameters.ownershipFileListPath }}).Length
            echo "Number of files in list: ${fileCount}"
            echo "Getting file list from Pull Request"

